(()=>{"use strict";function e(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function t(t){return function n(r){return 0===arguments.length||e(r)?n:t.apply(this,arguments)}}function n(n){return function r(s,i){switch(arguments.length){case 0:return r;case 1:return e(s)?r:t((function(e){return n(s,e)}));default:return e(s)&&e(i)?r:e(s)?t((function(e){return n(e,i)})):e(i)?t((function(e){return n(s,e)})):n(s,i)}}}const r=t((function(e){return null==e}));const s=n((function(e,t){return!r(t)&&e in t}));function i(r){return function s(i,o,u){switch(arguments.length){case 0:return s;case 1:return e(i)?s:n((function(e,t){return r(i,e,t)}));case 2:return e(i)&&e(o)?s:e(i)?n((function(e,t){return r(e,o,t)})):e(o)?n((function(e,t){return r(i,e,t)})):t((function(e){return r(i,o,e)}));default:return e(i)&&e(o)&&e(u)?s:e(i)&&e(o)?n((function(e,t){return r(e,t,u)})):e(i)&&e(u)?n((function(e,t){return r(e,o,t)})):e(o)&&e(u)?n((function(e,t){return r(i,e,t)})):e(i)?t((function(e){return r(e,o,u)})):e(o)?t((function(e){return r(i,e,u)})):e(u)?t((function(e){return r(i,o,e)})):r(i,o,u)}}}const o=Number.isInteger||function(e){return(e|0)===e};function u(e){return"[object String]"===Object.prototype.toString.call(e)}const a=n((function(e,t){return null==t||t!=t?e:t}));const c=i((function(e,t,n){return a(e,function(e,t){for(var n,r,s,i=t,a=0;a<e.length;a+=1){if(null==i)return;var c=e[a];o(c)?(r=i,s=void 0,s=(n=c)<0?r.length+n:n,i=u(r)?r.charAt(s):r[s]):i=i[c]}return i}(t,n))}));function l(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var d=Object.prototype.toString;const h=function(){return"[object Arguments]"===d.call(arguments)?function(e){return"[object Arguments]"===d.call(e)}:function(e){return l("callee",e)}}(),f=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};var b=t((function(e){return null!=e&&"function"==typeof e["fantasy-land/empty"]?e["fantasy-land/empty"]():null!=e&&null!=e.constructor&&"function"==typeof e.constructor["fantasy-land/empty"]?e.constructor["fantasy-land/empty"]():null!=e&&"function"==typeof e.empty?e.empty():null!=e&&null!=e.constructor&&"function"==typeof e.constructor.empty?e.constructor.empty():f(e)?[]:u(e)?"":function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)?{}:h(e)?function(){return arguments}():function(e){var t=Object.prototype.toString.call(e);return"[object Uint8ClampedArray]"===t||"[object Int8Array]"===t||"[object Uint8Array]"===t||"[object Int16Array]"===t||"[object Uint16Array]"===t||"[object Int32Array]"===t||"[object Uint32Array]"===t||"[object Float32Array]"===t||"[object Float64Array]"===t||"[object BigInt64Array]"===t||"[object BigUint64Array]"===t}(e)?e.constructor.from(""):void 0}));const g=b;function m(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function p(e,t,n){for(var r=0,s=n.length;r<s;){if(e(t,n[r]))return!0;r+=1}return!1}const y="function"==typeof Object.is?Object.is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};var _=!{toString:null}.propertyIsEnumerable("toString"),v=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],E=function(){return arguments.propertyIsEnumerable("length")}(),S=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1};const O="function"!=typeof Object.keys||E?t((function(e){if(Object(e)!==e)return[];var t,n,r=[],s=E&&h(e);for(t in e)!l(t,e)||s&&"length"===t||(r[r.length]=t);if(_)for(n=v.length-1;n>=0;)l(t=v[n],e)&&!S(r,t)&&(r[r.length]=t),n-=1;return r})):t((function(e){return Object(e)!==e?[]:Object.keys(e)}));const L=t((function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}));function A(e,t,n,r){var s=m(e);function i(e,t){return w(e,t,n.slice(),r.slice())}return!p((function(e,t){return!p(i,t,e)}),m(t),s)}function w(e,t,n,r){if(y(e,t))return!0;var s,i,o=L(e);if(o!==L(t))return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(o){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===(s=e.constructor,null==(i=String(s).match(/^function (\w*)/))?"":i[1]))return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!y(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!y(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var u=n.length-1;u>=0;){if(n[u]===e)return r[u]===t;u-=1}switch(o){case"Map":return e.size===t.size&&A(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":return e.size===t.size&&A(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=O(e);if(a.length!==O(t).length)return!1;var c=n.concat([e]),d=r.concat([t]);for(u=a.length-1;u>=0;){var h=a[u];if(!l(h,t)||!w(t[h],e[h],c,d))return!1;u-=1}return!0}const M=n((function(e,t){return w(e,t,[],[])}));const T=t((function(e){return null!=e&&M(e,g(e))}));const j=n((function(e,t){return t instanceof e||null!=t&&(t.constructor===e||"Object"===e.name&&"object"==typeof t)})),C=e=>e.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#0?39;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&");function k(e,...t){if("string"==typeof e)return C(e);let n=e[0];for(const[r,s]of t.entries())n=n+C(String(s))+e[r+1];return n}const F=(e,t,n,r)=>{if("length"===n||"prototype"===n)return;if("arguments"===n||"caller"===n)return;const s=Object.getOwnPropertyDescriptor(e,n),i=Object.getOwnPropertyDescriptor(t,n);!I(s,i)&&r||Object.defineProperty(e,n,i)},I=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},x=(e,t)=>`/* Wrapped ${e}*/\n${t}`,q=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),B=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");function P(e,t,{ignoreNonConfigurable:n=!1}={}){const{name:r}=e;for(const r of Reflect.ownKeys(t))F(e,t,r,n);return((e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)})(e,t),((e,t,n)=>{const r=""===n?"":`with ${n.trim()}() `,s=x.bind(null,r,t.toString());Object.defineProperty(s,"name",B);const{writable:i,enumerable:o,configurable:u}=q;Object.defineProperty(e,"toString",{value:s,writable:i,enumerable:o,configurable:u})})(e,t,r),e}const R=(e,t={})=>{if("function"!=typeof e)throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:n=0,maxWait:r=Number.POSITIVE_INFINITY,before:s=!1,after:i=!0}=t;if(n<0||r<0)throw new RangeError("`wait` and `maxWait` must not be negative.");if(!s&&!i)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let o,u,a;const c=function(...t){const c=this,l=()=>{u=void 0,o&&(clearTimeout(o),o=void 0),i&&(a=e.apply(c,t))},d=s&&!o;return clearTimeout(o),o=setTimeout((()=>{o=void 0,u&&(clearTimeout(u),u=void 0),i&&(a=e.apply(c,t))}),n),r>0&&r!==Number.POSITIVE_INFINITY&&!u&&(u=setTimeout(l,r)),d&&(a=e.apply(c,t)),a};return P(c,e),c.cancel=()=>{o&&(clearTimeout(o),o=void 0),u&&(clearTimeout(u),u=void 0)},c};class D extends HTMLElement{static get observedAttributes(){return[]}constructor(){super(),this.isExpanded=!1,this.toggleEls=[],this._submenuToggles=[],this._collections=[],this._allFocusable=[],this._subMenuLeftProps=[],this._focusableSelector='button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), \ntextarea:not([disabled]), [tabindex]:not([tabindex="-1"]):not([disabled]), \ndetails:not([disabled]), summary:not(:disabled)',this._onMenuToggle=this._onMenuToggle.bind(this),this._onSubMenuToggle=this._onSubMenuToggle.bind(this),this._onCloseSubMenuOnFocusShift=this._onCloseSubMenuOnFocusShift.bind(this),this._refreshSubmenus=this._refreshSubmenus.bind(this),this._checkClickOutside=this._checkClickOutside.bind(this),this._onFocusableBlur=this._onFocusableBlur.bind(this),this.reRenderDebounced=R((()=>{this._toggleMobileVersion(),this._reRenderSubMenus()}),{wait:250}),this.onReadyCb=()=>{try{this.reset(),this._setElements(),this._toggleMobileVersion(),this._initiateScript()}catch(e){return e}},document.addEventListener("builderius.frontend.api.ready",(()=>{this.onReadyCb()}),!1)}connectedCallback(){D.isBuilderMode()&&(this.onReadyCb(),document.addEventListener("DOMBuilderContentLoaded",(()=>{this.onReadyCb()}),!1)),window.addEventListener("resize",this.reRenderDebounced),document.addEventListener("click",this._checkClickOutside)}disconnectedCallback(){this.reset(),document.removeEventListener("builderius.frontend.api.ready",(()=>{}),!1),window.removeEventListener("resize",this.reRenderDebounced),document.removeEventListener("click",this._checkClickOutside),D.isBuilderMode()&&document.removeEventListener("DOMBuilderContentLoaded",(()=>{this.onReadyCb()}),!1)}attributeChangedCallback(e){this._upgradeProperty(e)}_upgradeProperty(e){const t=this._camalize(e);if(s(t,this)){let e=this[t];delete this[t],this[t]=e}}_camalize(e){return e.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,((e,t)=>t.toUpperCase()))}_fromDataset(e){const t={...this.dataset};return r(t[e])?t[e]:k(t[e])}_inDataset(e,t=null){return e in(r(t)?{...this.dataset}:{...t.dataset})}set dataToggleSelector(e){}get dataToggleSelector(){return this._fromDataset("toggleSelector")}_isMobileVersion(){const e=c(null,["Builderius","API","helpers","matchMedia"],window);if(e)return e(this._fromDataset("mobileMq"));throw new Error('No "matchMedia" function')}_setElements(){const{dataToggleSelector:e}=this;if(!T(e)){const t=c(null,["Builderius","API","helpers","isSelectorValid"],window);if(t){if(t(e)){const t=document.querySelectorAll(e);this.toggleEls=[...t]}}}this.toggleEls.forEach((e=>{"BUILDERIUS-MENU-TOGGLE"===e.nodeName?e.addEventListener("updated",this._onMenuToggle):e.addEventListener("click",this._onMenuToggle)}));const t=this.querySelectorAll(".am-submenu-toggle");this._submenuToggles=[...t],this._submenuToggles.forEach((e=>{e.addEventListener("click",this._onSubMenuToggle,!0),e.addEventListener("keyup",this._onCloseSubMenuOnFocusShift,!0)}));const n=this.querySelectorAll(".am-list-item a");this._listItemLinks=[...n],this._listItemLinks.forEach((e=>{e.addEventListener("keyup",this._onCloseSubMenuOnFocusShift,!0)}));const r=this.querySelectorAll('builderius-collection, ul[is="builderius-collection-ul"]');this._collections=[...r],this._collections.forEach((e=>{e.addEventListener("rendered",this._refreshSubmenus)})),this._allFocusable=this.querySelectorAll(this._focusableSelector),[...this._allFocusable].length&&[...this._allFocusable].forEach((e=>{e.addEventListener("blur",this._onFocusableBlur)}))}_onFocusableBlur(e){const t=e.relatedTarget;this.contains(t)||this._submenuToggles.forEach((e=>{if("true"===e.getAttribute("aria-expanded")){const t=e.closest(".am-list-item");e.setAttribute("aria-expanded",!1),t.classList.remove("active")}}))}_initiateScript(){try{this.reRenderDebounced(),this._dispatchEvent("ready",{el:this})}catch(e){return e}}_getFirstFocusableElement(e=this){if(e instanceof HTMLElement){const t=e.querySelector("builderius-menu-toggle");return t?t._btn:e.querySelector(this._focusableSelector)}return null}_toggleMenu(){if(!0===this.isExpanded){this.classList.add("is-expanded");const e=this._getFirstFocusableElement();e&&e.focus()}else this.classList.remove("is-expanded")}_toggleMobileVersion(){this._isMobileVersion()?this.classList.add("is-mobile"):this.classList.remove("is-mobile"),this._renderSemiStaticCss()}_renderSemiStaticCss(){if(D.isBuilderMode()){const e=new CustomEvent("builderius.renderSemiStaticCss",{bubbles:!1,cancelable:!0,detail:{el:this}});window.document.dispatchEvent(e)}}_onMenuToggle(e){e.preventDefault();const t=c(null,["detail","isActive"],e);this.changeState(t)}_refreshSubmenus(e){const t=e.currentTarget,n=t.querySelectorAll(".am-submenu-toggle");[...n].length&&(this._submenuToggles.forEach((e=>{e.removeEventListener("click",this._onSubMenuToggle,!0)})),this._submenuToggles=[...n],this._submenuToggles.forEach((e=>{e.addEventListener("click",this._onSubMenuToggle,!0)})));const r=this.querySelectorAll(".am-list-item a");[...r].length&&(this._listItemLinks.forEach((e=>{e.removeEventListener("keyup",this._onCloseSubMenuOnFocusShift,!0)})),this._listItemLinks=[...r],this._listItemLinks.forEach((e=>{e.addEventListener("keyup",this._onCloseSubMenuOnFocusShift,!0)}))),this._reRenderSubMenus(t)}_reRenderSubMenus(e=this){const t=e.querySelectorAll(".am-sub-menu");if([...t].length){let e=!1;const n=this._isMobileVersion();[...t].forEach((t=>{const{left:s,width:i}=t.getBoundingClientRect();let{leftProp:o}={...t.dataset};if(r(o)){const e=getComputedStyle(t);o=0===parseInt(e.left)?"":"push-right",t.setAttribute("data-left-prop",o)}s+i>window.innerWidth&&(e=!0),n?(t.classList.remove("push-left"),t.classList.remove("push-right")):e?T(o)||(t.classList.remove("push-right"),t.classList.add("push-left")):T(o)||(t.classList.remove("push-left"),t.classList.remove("push-right"),t.classList.add(o))}))}[...this._allFocusable].length&&[...this._allFocusable].forEach((e=>{e.removeEventListener("blur",this._onFocusableBlur)})),this._allFocusable=this.querySelectorAll(this._focusableSelector),[...this._allFocusable].length&&[...this._allFocusable].forEach((e=>{e.addEventListener("blur",this._onFocusableBlur)}))}_onSubMenuToggle(e){e.stopPropagation();const t=e.currentTarget,n=t.getAttribute("aria-expanded");this._submenuToggles.forEach((e=>{const r=e.closest(".am-list-item");(!r.contains(t)||e===t&&"true"===n)&&(e.setAttribute("aria-expanded",!1),r.classList.remove("active"))})),"true"!==n&&(t.setAttribute("aria-expanded",!0),t.closest(".am-list-item").classList.add("active"))}_onCloseSubMenuOnFocusShift(e){e.stopPropagation();const t=e.currentTarget;let n=t.closest(".am-list-item");this._submenuToggles.forEach((r=>{const s=r.getAttribute("aria-expanded");if([27].includes(e.keyCode)||["Escape"].includes(e.key)){if(n.contains(t)&&"true"===s){const e=r.closest(".am-list-item"),t=n.parentElement.closest(".am-list-item");if(e===t){const e=t.querySelectorAll(".am-list-item");[...e].length&&[...e].forEach((e=>e.classList.remove("active")));const n=t.querySelectorAll(".am-submenu-toggle");[...n].length&&[...n].forEach((e=>e.setAttribute("aria-expanded",!1))),r.setAttribute("aria-expanded",!1),t.classList.remove("active"),r.focus()}}}else n=r.closest(".am-list-item"),n.contains(t)||"true"!==s||(r.setAttribute("aria-expanded",!1),n.classList.remove("active"))}))}_checkClickOutside(e){e.stopPropagation();const t=e.target;this.contains(t)||this._submenuToggles.forEach((e=>{if("true"===e.getAttribute("aria-expanded")){const t=e.closest(".am-list-item");e.setAttribute("aria-expanded",!1),t.classList.remove("active")}}))}changeState(e=null){r(e)?(this.isExpanded=!this.isExpanded,this._toggleMenu()):(this.isExpanded=j(Boolean,e)?e:!r(e)&&!T(e),this._toggleMenu()),this._dispatchEvent("updated",{el:this,isExpanded:this.isExpanded})}_parseJson(e){let t={};if(j(Array,e))t=e.map((e=>this._parseJson(e)));else if(j(Object,e))for(let n in e)t[n]=this._parseJson(e[n]);else j(String,e)?(e=D.fromJson(e),t=j(Object,e)?this._parseJson(e):e):t=e;return t}_dispatchEvent(e,t=null){const n={bubbles:!1,cancelable:!0,detail:t},r=new CustomEvent(e,n),s=new CustomEvent(`builderius-menu-builder-${e}`,n);this.dispatchEvent(r),window.dispatchEvent(s)}reset(){if(this._subMenuLeftProps=[],D.isBuilderMode()){const e=this._fromDataset("uniNode"),t=document.querySelector(`#semiStaticCss-for-${e}`);t&&t.remove()}[...this._allFocusable].length&&[...this._allFocusable].forEach((e=>{e.removeEventListener("blur",this._onFocusableBlur)})),T(this._collections)||this._collections.forEach((e=>{e.removeEventListener("rendered",this._refreshSubmenus)})),T(this._submenuToggles)||this._submenuToggles.forEach((e=>{e.removeEventListener("click",this._onSubMenuToggle,!0)})),T(this.toggleEls)||this.toggleEls.forEach((e=>{"BUILDERIUS-MENU-TOGGLE"===e.nodeName?e.addEventListener("updated",this._onMenuToggle):e.addEventListener("click",this._onMenuToggle)}))}reInit(){this.onReadyCb()}testComponent(){return this.onReadyCb()}static fromJson(e){let t={};if(j(String,e))try{t=JSON.parse(k(e))}catch(t){return e}return t}static isBuilderMode(){return!1!==c(!1,["BuilderiusInner"],window)}}void 0===customElements.get("builderius-menu-builder")&&customElements.define("builderius-menu-builder",D)})();